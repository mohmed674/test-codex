{% extends "plm/base.html" %}
{% block title %}Product Lifecycle - PLM{% endblock %}

{% block content %}
<h1 class="mb-4">Product Lifecycle</h1>

<div class="card mb-3">
    <div class="card-body">
        <h5 class="card-title">Product Info</h5>
        <p><strong>Code:</strong> {{ product.code }}</p>
        <p><strong>Name:</strong> {{ product.name }}</p>
        <p><strong>Category:</strong> {{ product.category }}</p>
    </div>
</div>

<h5 class="mt-4">Lifecycle Stages</h5>
<table class="table table-striped table-bordered">
    <thead class="thead-dark">
        <tr>
            <th>Stage</th>
            <th>Started At</th>
            <th>Ended At</th>
        </tr>
    </thead>
    <tbody>
        {% for lc in lifecycles %}
        <tr>
            <td>{{ lc.stage.name }}</td>
            <td>{{ lc.started_at|date:"Y-m-d H:i" }}</td>
            <td>
                {% if lc.ended_at %}
                    {{ lc.ended_at|date:"Y-m-d H:i" }}
                {% else %}
                    Ongoing
                {% endif %}
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="3" class="text-center">No lifecycle records found.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
