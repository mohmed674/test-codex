<!-- D:\ERP_CORE\accounting\templates\accounting\reports\payments_by_method_report.html -->
{% extends 'core/base.html' %}
{% load static %}

{% block content %}
<div class="container mt-4">
  <div class="card shadow p-4 rounded-4">
    <h4 class="mb-4">๐ ูุดู ุงููุฏููุนุงุช ุญุณุจ ูุณููุฉ ุงูุฏูุน</h4>

    <form method="get" class="row g-3 mb-4" role="search" aria-label="ุชุตููุฉ ูุดู ุงููุฏููุนุงุช">
      <div class="col-md-3">
        <label class="form-label" for="method-select">ูุณููุฉ ุงูุฏูุน</label>
        <select id="method-select" name="method" class="form-select" tabindex="1" aria-describedby="methodHelp">
          <option value="">-- ุงููู --</option>
          <option value="cash" {% if method == "cash" %}selected{% endif %}>ููุฏู</option>
          <option value="bank" {% if method == "bank" %}selected{% endif %}>ุชุญููู ุจููู</option>
          <option value="vodafone" {% if method == "vodafone" %}selected{% endif %}>ููุฏุงููู ูุงุด</option>
          <option value="etisalat" {% if method == "etisalat" %}selected{% endif %}>ุงุชุตุงูุงุช ูุงุด</option>
          <option value="orange" {% if method == "orange" %}selected{% endif %}>ุฃูุฑูุฌ ูุงุด</option>
          <option value="instapay" {% if method == "instapay" %}selected{% endif %}>ุฅูุณุชุง ุจุงู</option>
          <option value="cheque" {% if method == "cheque" %}selected{% endif %}>ุดูู</option>
        </select>
        <div id="methodHelp" class="form-text">ุงุฎุชุฑ ูุณููุฉ ุงูุฏูุน ูุชุตููุฉ ุงููุชุงุฆุฌ</div>
      </div>
      <div class="col-md-3">
        <label class="form-label" for="date-from">ูู ุชุงุฑูุฎ</label>
        <input type="date" id="date-from" name="from" value="{{ date_from }}" class="form-control" placeholder="yyyy-mm-dd" tabindex="2" aria-label="ูู ุชุงุฑูุฎ">
      </div>
      <div class="col-md-3">
        <label class="form-label" for="date-to">ุฅูู ุชุงุฑูุฎ</label>
        <input type="date" id="date-to" name="to" value="{{ date_to }}" class="form-control" placeholder="yyyy-mm-dd" tabindex="3" aria-label="ุฅูู ุชุงุฑูุฎ">
      </div>
      <div class="col-md-3 d-flex align-items-end">
        <button type="submit" class="btn btn-primary w-100" tabindex="4">๐ ุนุฑุถ ุงูุชูุฑูุฑ</button>
      </div>
    </form>

    {% if data %}
      <table class="table table-bordered text-center align-middle">
        <thead class="table-light">
          <tr>
            <th>ุงูุนููู</th>
            <th>ุฅุฌูุงูู ุงููุจูุบ ุงููุฏููุน</th>
          </tr>
        </thead>
        <tbody>
          {% for row in data %}
            <tr>
              <td>{{ row.customer__name }}</td>
              <td>{{ row.total_paid|floatformat:2 }} ุฌ.ู</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
      <div class="mt-4 d-flex gap-3 justify-content-end">
        <a href="?{% if method %}method={{ method }}&{% endif %}{% if date_from %}from={{ date_from }}&{% endif %}{% if date_to %}to={{ date_to }}&{% endif %}export=pdf" class="btn btn-danger" role="button" aria-label="ุชุตุฏูุฑ PDF">๐ ุชุตุฏูุฑ PDF</a>
        <a href="?{% if method %}method={{ method }}&{% endif %}{% if date_from %}from={{ date_from }}&{% endif %}{% if date_to %}to={{ date_to }}&{% endif %}export=excel" class="btn btn-success" role="button" aria-label="ุชุตุฏูุฑ Excel">๐ ุชุตุฏูุฑ Excel</a>
      </div>
    {% else %}
      <div class="alert alert-info mt-3 text-center" role="alert" aria-live="polite" aria-atomic="true">ูุง ุชูุฌุฏ ูุชุงุฆุฌ ูุนุฑุถูุง ูู ุงููุชุฑุฉ ุงููุญุฏุฏุฉ.</div>
      <div class="mt-4 d-flex gap-3 justify-content-end">
        <button class="btn btn-danger" disabled aria-disabled="true" tabindex="-1">๐ ุชุตุฏูุฑ PDF</button>
        <button class="btn btn-success" disabled aria-disabled="true" tabindex="-1">๐ ุชุตุฏูุฑ Excel</button>
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}
