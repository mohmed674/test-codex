{% extends "core/base.html" %}
{% load i18n static %}
{% url 'products:product_create' as REDIRECT_URL %}

{% block title %}{% trans "ุฅุถุงูุฉ ููุชุฌ" %}{% endblock %}
{% block header_title %}๐ {% trans "ูููุฐุฌ ุฅุถุงูุฉ ุงูููุชุฌ" %}{% endblock %}
{% block breadcrumbs %}<a href="{% url 'core:launcher' %}">{% trans "ุงูุชุทุจููุงุช" %}</a> / {% trans "ุงูููุชุฌุงุช" %}{% endblock %}

{% block extra_head %}
  {# ุงูุฅุจูุงุก ุนูู ุงูุชุญููู ุงูููุฑู ููุง ูู #}
  <meta http-equiv="refresh" content="0; url={{ REDIRECT_URL }}">
  <script>try{location.replace("{{ REDIRECT_URL|escapejs }}");}catch(e){location.href="{{ REDIRECT_URL|escapejs }}";}</script>

  {# ุชุญุณููุงุช ุฏูู ุญุฐู ุฃู ููุทู ูุงุฆู #}
  {% if REDIRECT_URL %}
    <link rel="canonical" href="{{ REDIRECT_URL }}">
    <link rel="prefetch" href="{{ REDIRECT_URL }}">
  {% endif %}
{% endblock %}

{% block content %}
<div class="container-fluid px-3 py-4">
  {# ุงูุฅุจูุงุก ุนูู ุงูุชูุจูู ุงูุฃุตูู #}
  <div class="alert alert-info d-flex justify-content-between align-items-center">
    <span>{% trans "ูุชู ุงูุขู ุชุญูููู ุฅูู ูููุฐุฌ ุฅุถุงูุฉ ุงูููุชุฌ ุงูููุงุณู." %}</span>
    <a class="btn btn-primary" href="{{ REDIRECT_URL }}">{% trans "ุงูุงูุชูุงู ุงูุขู" %}</a>
  </div>

  {# ูุคุดุฑ ุจุณูุท ุฃุซูุงุก ุงูุชุญููู + ุชูุงูู ุจุฏูู ุฌุงูุงุณูุฑูุจุช #}
  <div class="d-flex align-items-center gap-2 text-muted" aria-live="polite">
    <div class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></div>
    <small>{% trans "ุฌุงุฑู ุงูุชุญูููโฆ" %}</small>
  </div>

  {% if not REDIRECT_URL %}
    <div class="alert alert-warning mt-3">
      <div class="fw-bold">{% trans "ุชุนุฐูุฑ ุชุญุฏูุฏ ูุณุงุฑ ูููุฐุฌ ุงูุฅุถุงูุฉ." %}</div>
      <div class="mt-2">
        <a class="btn btn-outline-primary btn-sm" href="/products/create/">{% trans "ูุญุงููุฉ ุนุจุฑ /products/create/" %}</a>
      </div>
    </div>
  {% endif %}

  <noscript>
    <div class="alert alert-secondary mt-3">
      {% trans "ุงููุชุตูุญ ูุง ูุฏุนู ุงูุฌุงูุงุณูุฑูุจุชโุงุณุชุฎุฏู ุงูุฒุฑ ุฃุนูุงู ููุงูุชูุงู." %}
    </div>
  </noscript>
</div>

{# ุชุญููู ูุญุงูุธ ุนูู ุจุงุฑุงูุชุฑุงุช ุงูุงุณุชุนูุงู ุฅู ููุฌุฏุช #}
<script>
(function(){
  var target = "{{ REDIRECT_URL }}";
  if (!target) return;
  try {
    var qs = location.search || "";
    if (qs) target += (target.indexOf('?') === -1 ? qs : '&' + qs.slice(1));
    window.location.replace(target);
  } catch (e) {
    location.href = target;
  }
})();
</script>
{% endblock %}
