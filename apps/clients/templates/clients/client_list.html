{% extends "base.html" %}
{% block content %}
<div class="container mt-4" dir="rtl">
  <h3 class="mb-3">ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h3>

  <!-- âœ… Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© -->
  {% if messages %}
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }} alert-dismissible fade show text-end" role="alert">
        {{ message }}
        <button type="button" class="btn-close float-start" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    {% endfor %}
  {% endif %}

  <div class="mb-3 text-end">
    <a href="{% url 'client_create' %}" class="btn btn-success">â• Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</a>
  </div>

  <table class="table table-bordered table-striped text-end">
    <thead class="table-light">
      <tr>
        <th>Ø§Ù„Ø§Ø³Ù…</th>
        <th>Ø§Ù„Ù‡Ø§ØªÙ</th>
        <th>Ø§Ù„Ø¨Ø±ÙŠØ¯</th>
        <th>Ø§Ù„Ù†Ù‚Ø§Ø·</th>
        <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
        <th>Ø®ÙŠØ§Ø±Ø§Øª</th>
      </tr>
    </thead>
    <tbody>
      {% for client in clients %}
      <tr>
        <td>{{ client.name }}</td>
        <td>{{ client.phone }}</td>
        <td>{{ client.email|default:"â€”" }}</td>
        <td>{{ client.points }}</td>
        <td>{{ client.status }}</td>  {# Ø£Ùˆ client.status() Ø¥Ù† ÙƒØ§Ù†Øª method #}
        <td>
          <a href="{% url 'client_update' client.pk %}" class="btn btn-sm btn-warning">âœï¸</a>
          <a href="{% url 'client_delete' client.pk %}" class="btn btn-sm btn-danger">ğŸ—‘ï¸</a>
          <a href="{% url 'client_ai_insight' client.pk %}" class="btn btn-sm btn-info">ğŸ¤– AI</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
