# MRP – تخطيط المواد والإنتاج

## 🎯 الهدف
يوفر هذا التطبيق نظامًا ذكيًا لتخطيط المواد المطلوبة للإنتاج، بناءً على أوامر التصنيع وبيانات BOM والمخزون المتاح، لضمان:
- منع التكدس أو نفاد المواد
- التنبؤ بالكميات المطلوبة بدقة
- تحسين التكامل بين الإنتاج والمشتريات والمخازن

---

## 🧩 الموديلات

### `MaterialPlanning`
| الحقل | النوع | الوصف |
|-------|-------|--------|
| product | FK (Product) | المنتج المطلوب إنتاجه |
| planned_quantity | Integer | الكمية المراد إنتاجها |
| required_date | Date | تاريخ الحاجة للإنتاج |
| auto_generated | Boolean | هل تم توليد الخطة تلقائيًا؟ |

### `MaterialLine`
| الحقل | النوع | الوصف |
|-------|-------|--------|
| planning | FK (MaterialPlanning) | الخطة المرتبطة |
| material | FK (Product) | المادة الخام المطلوبة |
| required_qty | Integer | الكمية المطلوبة للإنتاج |
| available_qty | Integer | الكمية المتوفرة في المخزون |
| shortage_qty | Integer | العجز بعد المقارنة |

---

## ⚙️ الوظائف

| الوظيفة | المسار | الوصف |
|---------|--------|--------|
| قائمة الخطط | `/mrp/` | عرض جميع خطط التخطيط الحالية |
| إضافة خطة | `/mrp/add/` | تحديد منتج وكمية، وتوليد خطة المواد تلقائيًا |
| تفاصيل الخطة | `/mrp/<pk>/` | عرض تفاصيل المواد الناقصة والكمية المتوفرة |

---

## 🔁 التكاملات

- ✅ `products` – المنتجات والمكونات
- ✅ `inventory` – مقارنة المخزون المتاح
- ✅ `production` – قراءة BOM
- ✅ `purchases` – يمكن توليد أوامر شراء تلقائية عند وجود نقص
- ✅ `ai.py` – دعم التحليل الذكي والتوصيات

---

## 🧠 الذكاء الاصطناعي

- ملف `ai.py` لتحليل موسمي واقتراح كميات مستقبلية
- يدعم ربط التوصيات المستقبلية مع بيانات الطلبات السابقة والمبيعات

---

## 🛠️ المهام الآلية

- `tasks.py`: قابل لتشغيل عمليات تحليل تلقائي وتوليد خطط دورية

---

## 📄 القوالب

| القالب | الاستخدام |
|--------|------------|
| `planning_list.html` | قائمة كل الخطط |
| `planning_form.html` | نموذج إدخال خطة جديدة |
| `planning_detail.html` | تفاصيل المواد لكل خطة |

---

## 📤 التصدير والطباعة

- يمكن توسيعه لاحقًا لإخراج خطة المواد بصيغة PDF أو Excel مباشرةً

---

## ✅ جاهزية الإنتاج
- التطبيق جاهز للعمل الفوري داخل دورة الإنتاج
- يدعم التحليل والمتابعة وتوليد تقارير يومية أو أسبوعية
