# 📦 purchases

## 🧾 الهدف
إدارة طلبات الشراء من جميع أقسام المؤسسة، تشمل مراجعة محاسبية ومخزنية كاملة، وتكامل ذكي مع الأنظمة الأخرى، باستخدام منطق مشابه لنظام SAP.

---

## 🧩 الموديلات

- `PurchaseRequest`: يمثل طلب شراء مقدم من موظف أو قسم.
- `PurchaseItem`: الأصناف المرتبطة بكل طلب.
- `PurchaseOrder`: أمر الشراء الذي يُصدر بناءً على الطلب.
- `PurchaseInvoice`: الفاتورة النهائية المرتبطة بأمر الشراء.

---

## 🧠 الوظائف

- إدخال طلب شراء يدوي من أي موظف.
- تحديد الأصناف والكميات والغرض.
- إصدار أمر شراء ومتابعة حالة الاستلام.
- تسجيل الفاتورة وربطها بحساب محاسبي.
- تنبيهات ذكية عند وجود طلب عاجل أو أمر شراء بقيمة عالية.
- تقرير PDF وExcel شامل.
- إشعارات للطلبات المعلقة.
- صلاحيات دقيقة حسب الإدارة أو المجموعة.
- دعم الـ API للتكامل مع الأنظمة الأخرى.

---

## 🔗 التكاملات

- `employees`: بيانات الموظفين.
- `departments`: بيانات الأقسام.
- `products`: المنتجات.
- `accounting`: الحسابات المالية.
- `ai_decision`: تنبيهات الذكاء الاصطناعي.
- `internal_monitoring`: حوادث المخاطر والمراقبة.

---

## 🤖 الذكاء الاصطناعي والتنبيهات

- تسجيل طلب فيه كلمة "عاجل" ⟶ يصدر تنبيه AI.
- أمر شراء بقيمة > 100,000 ⟶ تنبيه + سجل مخاطرة.
- مهمة تذكير تلقائية يومية للطلبات المعلقة.

---

## 📤 التصدير والطباعة

- PDF عبر `weasyprint` بتنسيق رسمي جاهز للطباعة.
- Excel جاهز للمراجعة أو التدقيق المحاسبي.

---

## ✅ أنظمة التدقيق

- `signals.py`: مراقبة الطلبات والأوامر.
- `permissions.py`: التحكم في الصلاحيات.
- `tasks.py`: التذكير التلقائي.
- `serializers.py`: دعم التكامل وAPI.

---

## 🧷 ملاحظات

❌ يُمنع حذف أي سطر من الملفات أو القوالب.  
📁 كل ملفات النظام مكتملة بشكل نهائي لا يحتاج تعديل لاحق.  
📦 التطبيق مرتبط بالكامل بجميع الأنظمة الأخرى وجاهز للإطلاق.

