# Shipping (الشحن وتتبع الشحنات)

تطبيق إدارة الشحنات يتيح ربط الفواتير بعمليات الشحن وتتبّع الشحنات وتكاليفها، مع التكامل الكامل مع العملاء والمحاسبة والفواتير.

---

## 🧩 الموديلات

- `ShippingCompany`: شركات الشحن الخارجية
- `Shipment`: الشحنة المرتبطة بفاتورة وعميل، وتتضمن معلومات التتبع والتكلفة والحالة

---

## ⚙️ الوظائف

- إضافة وتعديل شركات الشحن
- إنشاء شحنة وربطها بفواتير البيع والعملاء
- تتبع حالة الشحنة (تم الإنشاء، قيد التوصيل، تم التسليم، فشل التوصيل)
- تسجيل تاريخ الشحن والتوصيل
- تسجيل تكلفة الشحن وطريقة الدفع

---

## 🔄 التكاملات

- مع الفواتير `Invoice`
- مع العملاء `Client`
- مع المحاسبة `accounting`
- مع المبيعات `sales` (عبر ربط الشحنة بالفاتورة)

---

## 🧠 الذكاء الآلي

- إشارة `signals.py`: عند إنشاء شحنة، يتم تسجيل قيد محاسبي تلقائي لتكلفة الشحن
- مهمة `tasks.py`: تمييز الشحنات القديمة (>7 أيام) التي لم تُسلّم بأنها "فشلت"
- صلاحيات مخصصة لموظفي الشحن `permissions.py`

---

## 🧾 التقارير والتصدير

- عرض كافة الشحنات مع التصفية حسب الشركة أو الحالة
- تتبع الشحنة بالتفصيل حسب رقم التتبع
- دعم الطباعة سيتم تضمينه في تقارير المبيعات والشحن لاحقًا

---

## 🔐 الصلاحيات

- يسمح فقط للمستخدمين ضمن مجموعة `Shipping` أو `Admin` بإضافة/تعديل الشحنات
- الباقي يمكنه العرض فقط

---

## 🧪 التكامل مع الأنظمة

| النظام             | التكامل                                      |
|--------------------|-----------------------------------------------|
| `clients`          | ربط العميل بالشحنة                           |
| `sales`            | ربط الشحنة بالفاتورة                         |
| `accounting`       | تسجيل تكلفة الشحن تلقائيًا في الحسابات       |
| `payment methods`  | تحديد طريقة دفع تكلفة الشحن                  |

---

## 📂 الملفات المنفذة

- `models.py`
- `views.py`
- `forms.py`
- `admin.py`
- `urls.py`
- `templates/shipping/` (واجهة كاملة)
- `permissions.py`
- `serializers.py`
- `signals.py`
- `tasks.py`
- `README.md` ← هذا الملف

---

✅ **تم قفل تطبيق Shipping بالكامل بعد التنفيذ والتوثيق النهائي.**
