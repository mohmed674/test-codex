{% load static %}
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ğŸ“‹ Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ±</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <style>
        .status-hadir { color: green; font-weight: bold; }
        .status-absent { color: red; font-weight: bold; }
        .status-leave { color: orange; font-weight: bold; }
        @media print {
            .no-print { display: none; }
        }
    </style>
</head>
<body class="container mt-4">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>ğŸ“‹ Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ±</h2>
        <a href="{% url 'attendance_create' %}" class="btn btn-success no-print">â• ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</a>
    </div>

    <form method="get" class="row g-2 mb-3 no-print">
        <div class="col-md-2">
            <input type="text" name="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù" value="{{ request.GET.name }}" class="form-control">
        </div>
        <div class="col-md-2">
            <select name="status" class="form-select">
                <option value="">-- Ø§Ù„Ø­Ø§Ù„Ø© --</option>
                <option value="Ø­Ø§Ø¶Ø±" {% if request.GET.status == "Ø­Ø§Ø¶Ø±" %}selected{% endif %}>Ø­Ø§Ø¶Ø±</option>
                <option value="ØºØ§Ø¦Ø¨" {% if request.GET.status == "ØºØ§Ø¦Ø¨" %}selected{% endif %}>ØºØ§Ø¦Ø¨</option>
                <option value="Ø¥Ø¬Ø§Ø²Ø©" {% if request.GET.status == "Ø¥Ø¬Ø§Ø²Ø©" %}selected{% endif %}>Ø¥Ø¬Ø§Ø²Ø©</option>
            </select>
        </div>
        <div class="col-md-2">
            <input type="date" name="date_from" value="{{ request.GET.date_from }}" class="form-control" placeholder="Ù…Ù†">
        </div>
        <div class="col-md-2">
            <input type="date" name="date_to" value="{{ request.GET.date_to }}" class="form-control" placeholder="Ø¥Ù„Ù‰">
        </div>
        <div class="col-md-2">
            <button type="submit" class="btn btn-primary w-100">ğŸ” Ø¨Ø­Ø«</button>
        </div>
        <div class="col-md-2">
            <a href="{% url 'attendance_list' %}" class="btn btn-secondary w-100">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</a>
        </div>
    </form>

    <table class="table table-bordered text-center align-middle">
        <thead class="table-light">
            <tr>
                <th>Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù</th>
                <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
            </tr>
        </thead>
        <tbody>
            {% if records %}
                {% for attendance in records %}
                    <tr>
                        <td>{{ attendance.evaluation.employee.name }}</td>
                        <td>{{ attendance.date }}</td>
                        <td>
                            {% if attendance.status == "Ø­Ø§Ø¶Ø±" %}
                                <span class="status-hadir">Ø­Ø§Ø¶Ø±</span>
                            {% elif attendance.status == "ØºØ§Ø¦Ø¨" %}
                                <span class="status-absent">ØºØ§Ø¦Ø¨</span>
                            {% elif attendance.status == "Ø¥Ø¬Ø§Ø²Ø©" %}
                                <span class="status-leave">Ø¥Ø¬Ø§Ø²Ø©</span>
                            {% else %}
                                {{ attendance.status }}
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="3">âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù…Ø·Ø§Ø¨Ù‚Ø©.</td>
                </tr>
            {% endif %}
        </tbody>
    </table>

</body>
</html>
