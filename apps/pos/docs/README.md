# POS (نقاط البيع)

نظام نقاط البيع يتيح فتح جلسات بيع وربطها بالكاشير، وتسجيل الطلبات والدفع مباشرة باستخدام وسائل متعددة، مع تكامل محاسبي كامل.

---

## 🧩 الموديلات الأساسية

- `POSSession`: جلسة بيع تبدأ وتنتهي مع الكاشير
- `POSOrder`: طلب بيع داخل جلسة
- `POSOrderItem`: منتجات الطلب مع الكمية والسعر

---

## ⚙️ الوظائف

- فتح جلسة بيع
- إغلاق الجلسة تلقائيًا أو يدويًا
- إنشاء طلب بيع وربطه بجلسة
- حساب الإجمالي والدفع
- استرجاع الطلبات (Refund)

---

## 🔄 التكاملات

- مع العملاء `Client`
- مع الموظفين `Employee`
- مع المنتجات `Product`
- مع وسائل الدفع `PaymentMethod` من تطبيق `accounting`
- إنشاء قيد محاسبي تلقائي مع كل عملية بيع

---

## 🧠 الذكاء الآلي

- إشارة `signals` لإنشاء قيد محاسبي عند إنشاء الطلب
- مهمة `task` تلقائية لإغلاق الجلسات بعد 8 ساعات
- صلاحيات خاصة بالكاشير عبر `permissions.py`

---

## 🧾 التقارير والتصدير

- عرض تفاصيل الطلب
- طباعة فواتير نقطة البيع (جاهزة في `order_detail.html`)
- تصدير الفواتير وبيانات الجلسات سيتم إضافته في مرحلة التقارير العامة

---

## 🔐 الصلاحيات

- الكاشير فقط من يمكنه فتح وإغلاق الجلسة وإنشاء الطلبات
- بقية المستخدمين صلاحياتهم للعرض فقط

---

## 🧪 التكامل مع الأنظمة

| النظام             | التكامل                            |
|--------------------|-------------------------------------|
| `products`         | عرض واختيار المنتجات داخل الطلب     |
| `clients`          | اختيار العميل المرتبط بالطلب       |
| `accounting`       | إنشاء قيود محاسبية تلقائيًا         |
| `employees`        | ربط الجلسة بالكاشير (الموظف)        |

---

## 📂 الملفات المنفذة

- `models.py`
- `views.py`
- `forms.py`
- `admin.py`
- `urls.py`
- `templates/pos/` (واجهة البيع)
- `permissions.py`
- `serializers.py`
- `signals.py`
- `tasks.py`
- `README.md` ← هذا الملف

---

✅ **تم قفل تطبيق POS بالكامل بعد التنفيذ والتوثيق النهائي.**
