{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="container mt-4">
  <div class="card shadow p-4 rounded-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h3 class="mb-0">ğŸ“¦ Ù„ÙˆØ­Ø© ØªØªØ¨Ø¹ Ø§Ù„Ø´Ø­Ù†Ø§Øª</h3>
      <div>
        <a href="?from={{ filters.from }}&to={{ filters.to }}&tracking_code={{ filters.tracking_code }}&customer_name={{ filters.customer_name }}&phone={{ filters.phone }}&download_pdf=1" class="btn btn-danger btn-sm">ğŸ–¨ï¸ PDF</a>
        <a href="?from={{ filters.from }}&to={{ filters.to }}&tracking_code={{ filters.tracking_code }}&customer_name={{ filters.customer_name }}&phone={{ filters.phone }}&export=1" class="btn btn-success btn-sm">ğŸ“Š Excel</a>
      </div>
    </div>

    <!-- ğŸ” Ø§Ù„ÙÙ„Ø§ØªØ± -->
    <form method="get" class="row g-2 mb-4">
      <div class="col-md-3">
        <input type="text" name="tracking_code" class="form-control" placeholder="ÙƒÙˆØ¯ Ø§Ù„ØªØªØ¨Ø¹" value="{{ filters.tracking_code }}">
      </div>
      <div class="col-md-3">
        <input type="text" name="customer_name" class="form-control" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„" value="{{ filters.customer_name }}">
      </div>
      <div class="col-md-3">
        <input type="text" name="phone" class="form-control" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (Ù…Ù„Ø§Ø­Ø¸Ø§Øª)" value="{{ filters.phone }}">
      </div>
      <div class="col-md-3">
        <input type="date" name="from" class="form-control" value="{{ filters.from }}">
      </div>
      <div class="col-md-3">
        <input type="date" name="to" class="form-control" value="{{ filters.to }}">
      </div>
      <div class="col-md-3">
        <button type="submit" class="btn btn-dark w-100">ğŸ” Ø¨Ø­Ø«</button>
      </div>
      <div class="col-md-3">
        <a href="{% url 'tracking:tracking_dashboard' %}" class="btn btn-secondary w-100">ğŸ” Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</a>
      </div>
    </form>

    <!-- ğŸ“‹ Ø§Ù„Ø¬Ø¯ÙˆÙ„ -->
    <div class="table-responsive">
      <table class="table table-bordered table-striped text-center align-middle">
        <thead class="table-dark">
          <tr>
            <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø´Ø­Ù†</th>
            <th>ÙƒÙˆØ¯ Ø§Ù„ØªØªØ¨Ø¹</th>
            <th>Ø§Ù„Ù…Ù†ØªØ¬</th>
            <th>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
            <th>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</th>
            <th>Ø´Ø±ÙƒØ© Ø§Ù„Ø´Ø­Ù†</th>
            <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
          </tr>
        </thead>
        <tbody>
          {% for r in records %}
          <tr>
            <td>{{ r.shipment_date }}</td>
            <td>{{ r.tracking_code }}</td>
            <td>{{ r.product_name }}</td>
            <td>{{ r.customer_name }}</td>
            <td>{{ r.get_payment_method_display }}</td>
            <td>{{ r.shipping_company|default:"-" }}</td>
            <td>
              {% if r.status == "delivered" %}
                <span class="badge bg-success">{{ r.get_status_display }}</span>
              {% elif r.status == "pending" %}
                <span class="badge bg-warning text-dark">{{ r.get_status_display }}</span>
              {% elif r.status == "cancelled" %}
                <span class="badge bg-danger">{{ r.get_status_display }}</span>
              {% else %}
                <span class="badge bg-secondary">{{ r.get_status_display }}</span>
              {% endif %}
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="7" class="text-center text-danger">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø´Ø­Ù†Ø§Øª Ù…Ø³Ø¬Ù„Ø©</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
